(function(a){var e=null,g=[];a.fn.validate=function(b,c){e=a.extend({},a.fn.validate.defaults,c);a.each(c.watch,function(d){a("#"+c.watch[d]).change(function(){a.fn.validate.ajaxField(a(this))})});a.each(b,function(d){var f=this;a("#"+d).blur(function(){a(this).removeClass("form-error").parent().removeClass("error").children("div.error-message").remove();a.fn.validate.validateField(d,f)})});return this.each(function(){$this=a(this);$this.submit(function(){a.fn.validate.beforeFilter();g=[];a.each(b,
function(d){result=a.fn.validate.validateField(d,this);if(typeof result!="undefined")return result});a.fn.validate.afterFilter(g);if(g.length>0)return false;return true})})};a.fn.validate.validateField=function(b,c){var d=null;$field=a("#"+b);d=$field.attr("type")=="checkbox"?$field.filter(":checked").length>0?$field.filter(":checked").val():"0":$field.val();var f=$field.attr("name");if(typeof d=="string")d=a.trim(d);a.each(c,function(){if($field.attr("id")==undefined)return true;if(this.allowEmpty&&
typeof d=="string"&&d=="")return true;if(this.allowEmpty&&typeof d=="object"&&d==null)return true;if(!a.fn.validate.validateRule(d,this.rule,this.negate,f)){g.push(this.message);a.fn.validate.setError(b,this.message);if(this.last===true)return false}})};a.fn.validate.validateRule=function(b,c,d,f){if(d==undefined)d=false;if(typeof c=="object")return a.fn.validate[c.rule]!=undefined?a.fn.validate[c.rule](b,c.params,f):true;if(d&&b.match(eval(c)))return false;else if(!d&&!b.match(eval(c)))return false;
return true};a.fn.validate.bool=function(b){return a.fn.validate.inList(b,[0,1,"0","1",true,false])};a.fn.validate.comparison=function(b,c){if(b=="")return false;b=Number(b);if(b=="NaN")return false;if(eval(b+c[0]+c[1]))return true;return false};a.fn.validate.inList=function(b,c){if(c!=null)if(a.inArray(b,c)==-1)return false;return true};a.fn.validate.range=function(b,c){if(b<parseInt(c[0]))return false;if(b>parseInt(c[1]))return false;return true};a.fn.validate.multiple=function(b,c){if(typeof b!=
"object"||b==null)return false;if(c.min!=null&&b.length<c.min)return false;if(c.max!=null&&b.length>c.max)return false;if(c["in"]!=null)for(i=0;i<c["in"].length;i++)if(a.inArray(c["in"][i],b)==-1)return false;return true};a.fn.validate.notEmpty=function(b){if(typeof b=="string"&&b=="")return false;if(typeof b=="object"&&b.length==0)return false;return true};a.fn.validate.range=function(b,c){if(b<parseInt(c[0]))return false;if(b>parseInt(c[1]))return false;return true};a.fn.validate.ajaxField=function(b){a.fn.validate.clearError(b);
a.fn.validate.ajaxBeforeFilter(b);var c={};c[b.attr("name")]=b.val();a.post(e.root+"js_validate/field/"+b.attr("id"),c,function(d){a.fn.validate.ajaxAfterFilter(a("#"+d.field));d.result||a.fn.validate.setError(d.field,d.message)},"json")};a.fn.validate.ajaxBeforeFilter=function(b){b.after('<img class="ajax-loader" src="'+e.root+'js_validate/img/ajax-loader.gif">')};a.fn.validate.ajaxAfterFilter=function(b){b.siblings(".ajax-loader").remove()};a.fn.validate.clearError=function(b){if(typeof b=="string")b=
a("#"+field);b.removeClass("form-error").parents("div:first").removeClass("error").children(".error-message").remove()};a.fn.validate.setError=function(b,c){a("#"+b).addClass("form-error").parents("div:first").addClass("error").append('<div class="error-message">'+c+"</div>")};a.fn.validate.beforeFilter=function(){e.messageId!=null&&a("#"+e.messageId).html("").slideDown();a(".error-message").remove();a("input").removeClass("form-error");a("div").removeClass("error")};a.fn.validate.afterFilter=function(b){e.messageId!=
null&&a("#"+e.messageId).html(b.join("<br />")).slideDown()}})(jQuery);
